/*
 * ==================================================
 * Normalize
 * ==================================================
 */

// ---------------------------------------------------------------------------
// Local mixins are documented in utilities.scss, the rest are Compass mixins.
// Look here for the Compass mixin docs http://compass-style.org/index/mixins/
// ---------------------------------------------------------------------------

// Font Stacks
//@include font-face-family(DroidSansRegular, DroidSans);

// Base structure

@include establish-baseline;

html {
  height: 100%;
  // Prevent iOS text size adjust on orientation change without disabling user zoom.
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
}

// HTML5 display definitions.

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
menu,
nav,
section,
dialog,
summary {
  display: block;
}

// Vertical Rhythm, add and/or remove tags as your baseline grid needs.

p,
blockquote,
q,
pre,
address,
hr,
code,
samp,
dl,
ol,
ul,
form,
table,
fieldset,
menu,
figure,
figcaption,
button,
hr {
  @include margin-leader(0);
  @include margin-trailer(1);
}

// Corrects inline-block not defined in IE6/7/8 and FF3.

audio,
canvas,
video {
  display: inline-block;
  @if $legacy-support-for-ie6 or $legacy-support-for-ie7 {
    *display: inline;
    *zoom: 1;
  }
}

audio:not([controls]) {
  display: none;
}

// Ensures content is hidden from all presentations, including screenreaders.

[hidden] {
  display: none;
}

html {
  font-family: $text-font-family;
}

body {
  margin: 0;
}

// Addresses font-family inconsistency between 'textarea' and other form elements.

input,
select,
textarea {
  color: $text-color;
  font-size: 100%;
}

button {
  color: $text-color;
  font-family: $button-font-family;
}

/* Links */

a {
  text-decoration: none;
  @include link-colors($link-color, $hover: $link-color-hover, $focus: $link-color-hover, $visited: $link-color-visited, $active: $link-color-active);
  &:focus {
    outline: thin dotted;
  }
  &:hover {
    padding-bottom: 1px;
    border-bottom: 1px solid $link-color-hover;
  }
  &:hover, &:active {
    outline: none;
  }
  &.active {
    color: $link-color-active;
  }
}

.postscript, aside, blockquote, p, td {
  a, a p {
    border-bottom: 1px solid rgba(87, 87, 87, 0.2);
    padding-bottom: 1px;
    &:hover {
      border-bottom: 1px solid $link-color-hover;
    }
  }
}

/* Drupal inline Links */

ul.links { // List of links generated by theme_links().
  @include horizontal-list-container;
  &.inline li {
    @include horizontal-list-item(1em, left);
  }
}

ul.action-links {
  @include horizontal-list-container;
  li {
    @include horizontal-list-item(1em, left);
  }
}

// Addresses outline displayed oddly in Chrome.

a:focus {
  outline: thin dotted;
}

// Improves readability when focused and also mouse hovered in all browsers.
// people.opera.com/patrickl/experiments/keyboard/test

a:hover,
a:active {
  outline: 0;
}

// Embedded content

img,
object,
video {
  max-width: 100%;
// Automatically scales images larger than the container. Consider this first: http://unstoppablerobotninja.com/entry/fluid-images/
}

// IE6 doesn't support max-width, so we just use width.
// If the image is larger than the container, use this.
// If it is smaller than the container, change the 100% value to an absolute one.
@if $legacy-support-for-ie6 {
  @media only screen and (max-width: 768px) {
    .ie6 #main img {
      width: 100%;
    }
  }
}

img {
  height: auto;
  border: 0;
  // Improve IE's resizing of images: css-tricks.com/ie-fix-bicubic-scaling-for-images
  .ie6-7 & {
    -ms-interpolation-mode: bicubic;
  }
  // Workaround for responsive images in ie6, only resize in sidebars.
  @if $legacy-support-for-ie6 {
    .ie6 .region-sidebar-first &,
    .ie6 .region-sidebar-second & {
      width: 100%;
    }
  }
}

// Corrects overflow displayed oddly in IE9.

svg:not(:root) {
  overflow: hidden;
}

// Reintroduce inner spacing in 'table' to avoid overlap and whitespace issues in IE6/7.

// IE7
@if $legacy-support-for-ie7 {
  .ie6-7 {
    table {
      button,
      input {
        overflow: auto;
      }
    }
  }
}

// Position 'sub' and 'sup' without affecting line-height: gist.github.com/413930

sub {
  @include adjust-font-size-to($font-size-xxs,0);
  position: relative;
  vertical-align: baseline;
}

sup {
  @include adjust-font-size-to($font-size-xxs,0);
  position: relative;
  top: -0.5em;
  vertical-align: baseline;
}

sub {
  bottom: -0.25em;
}

/* Figures */

figure {
  margin: 0;
}

/*
 * ==================================================
 * Forms
 * ==================================================
 */

// ---------------------------------------------------------------------------
// Local mixins are documented in utilities.scss, the rest are Compass mixins.
// Look here for the Compass mixin docs http://compass-style.org/index/mixins/
// ---------------------------------------------------------------------------


/*
 * Corrects margin displayed oddly in IE6/7
 */

form {
  margin: 0;
}

// Aligns checkbox text to middle of checkbox.
input.form-checkbox,
input.form-radio {
  vertical-align: middle;
}

/* UI Consistency */
// Derived from formalize https://github.com/nathansmith/formalize/

label {
  display: block;
  font-weight: bold;
  &.option {
    display: inline;
    font-weight: normal;
    vertical-align: middle;
  }
}

input[type="search"]::-webkit-search-decoration {
  display: none;
}

// For Firefox
input,
button,
select,
textarea {
  // Suppress red glow that Firefox
  // adds to form fields by default.
  &:invalid {
    @include box-shadow(none);
  }
  // Add blue glow.
  &:focus {
    @include box-shadow(#0066ff 0 0 4px 0);
    @include transition-duration(0.4s);
    // for Opera
    z-index: 1;
  }
}

// iPad
@media (-webkit-min-device-pixel-ratio: 1) and (max-device-width: 1024px) {
  input[type="radio"],
  input[type="checkbox"] {
    vertical-align: baseline;
    top: 2px;
  }
}

// iPad 3
@media (-webkit-min-device-pixel-ratio: 2) and (max-device-width: 1024px) {
  input[type="radio"],
  input[type="checkbox"] {
    vertical-align: baseline;
    top: 2px;
  }
}

// iPhone 3
@media (-webkit-min-device-pixel-ratio: 1) and (max-device-width: 480px) {
  input[type="radio"],
  input[type="checkbox"] {
    vertical-align: baseline;
    top: 0;
  }
}

// iPhone 4
@media (-webkit-min-device-pixel-ratio: 2) and (max-device-width: 480px) {
  input[type="radio"],
  input[type="checkbox"] {
    vertical-align: baseline;
    top: 0;
  }
}


// Reset height since textareas have rows
textarea {
  height: auto;
}

// Reset width of input buttons, radios, checkboxes
input[type="submit"],
input[type="reset"],
input[type="button"],
input[type="radio"],
input[type="checkbox"] {
  width: auto; // Override of generic input selector
}

input,
button,
select,
textarea {
  margin: 0;
  vertical-align: middle;
}

button:focus,
input:focus,
select:focus,
textarea:focus {
  @include box-shadow(#0066ff 0 0 7px 0);
  // for Opera
  z-index: 1;
}

input[type="file"],
input[type="radio"],
input[type="checkbox"] {
  &:focus,
  &:active {
    @include box-shadow(none);
  }
}


textarea,
select,
input[type="date"],
input[type="datetime"],
input[type="datetime-local"],
input[type="email"],
input[type="month"],
input[type="number"],
input[type="password"],
input[type="search"],
input[type="tel"],
input[type="text"],
input[type="time"],
input[type="url"],
input[type="week"] {
  @include adjust-font-size-to($font-size-normal,1);
  @include background-clip(padding-box);
  @include border-radius(0);
  @include box-sizing(border-box);
  -webkit-appearance: none;
  background-color: $form-background;
  @include rhythm-borders(1px);
  border-color: $form-border-1 $form-border-2 $form-border-3;
  color: $text-color;
  font-family: $input-font-family;
  outline: 0;
  padding: 2px;
  text-align: left;
  &[disabled] {
    background-color: $form-background-disabled;
  }
}

// IE7
@if $legacy-support-for-ie7 {
  .ie7 {
    textarea,
    select,
    input[type="date"],
    input[type="datetime"],
    input[type="datetime-local"],
    input[type="email"],
    input[type="month"],
    input[type="number"],
    input[type="password"],
    input[type="search"],
    input[type="tel"],
    input[type="text"],
    input[type="time"],
    input[type="url"],
    input[type="week"] {
      height: auto;
      padding-bottom: 1px;
      padding-top: 2px;
    }
  }
}

// IE6
@if $legacy-support-for-ie6 {
  .ie6 textarea,
  .ie6 select,
  .ie6 input.form-text {
    @include adjust-font-size-to($font-size-normal,1);
    background: $form-background;
    border: 1px solid;
    border-color: $form-border-1 $form-border-2 $form-border-3;
    color: $text-color;
    font-family: $input-font-family;
    padding: 2px 3px 1px;
    vertical-align: top;
  }
  .ie6 select {
    margin-top: 1px;
  }
}

button[disabled],
input[disabled],
select[disabled],
select[disabled] option,
select[disabled] optgroup,
textarea[disabled] {
  @include box-shadow(none);
  color: $form-disabled;
  cursor: default;
  user-select: none;
  -moz-user-select: -moz-none;
  -webkit-user-select: none;
}

// IE6
@if $legacy-support-for-ie6 {
  .ie6 input.form-button-disabled {
    color: $form-disabled;
  }
}

// Separate rule for Firefox.
// Separate rule for IE, too.
// Cannot stack with WebKit's.
::-webkit-input-placeholder {
  color: $form-disabled;
}

input:-moz-placeholder,
textarea:-moz-placeholder {
  color: $form-disabled;
}

// going to replace when i find out a class name for placeholder text in drupal
input.placeholder_text,
textarea.placeholder_text {
  color: $form-disabled;
}

:invalid {
  // Suppress red glow that Firefox
  // adds to form fields by default,
  // even when user is still typing.
  @include box-shadow(none);
}

textarea,
select[size],
select[multiple] {
  height: auto;
}

// Tweaks for Safari + Chrome.
@media (-webkit-min-device-pixel-ratio: 0) {
  select {
    background-image: image-url("select_arrow.gif");
    background-repeat: no-repeat;
    background-position: right center;
    padding-right: $typographic-indent;
  }
  select[size],
  select[multiple] {
    background-image: none;
    padding: 0;
  }

  ::-webkit-validation-bubble-message {
    -webkit-box-shadow: rgba(black, 0.5) 0 0 5px 0;
    box-shadow: rgba(black, 0.5) 0 0 5px 0;
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0, #666666), color-stop(1, black));
    border: 1px solid;
    border-color: $form-border-1 $form-border-2 $form-border-3;
    color: white;
    font-family: $input-font-family;
    @include adjust-font-size-to($font-size-sm,1);
    height: 16px;
    overflow: hidden;
    padding: 15px 15px 17px;
    @include text-shadow(rgba(black, 0) 0 0 1px);
  }
  ::-webkit-validation-bubble-arrow,
  ::-webkit-validation-bubble-top-outer-arrow,
  ::-webkit-validation-bubble-top-inner-arrow {
    -webkit-box-shadow: none;
    background: #666666;
    border: 0;
    box-shadow: none;
  }
}

textarea {
  min-height: 40px;
  overflow: auto;
  resize: vertical;
}

optgroup {
  color: black;
  font-style: normal;
  font-weight: normal;
}


/* Print styles */ 

// Inlined to avoid extra HTTP connection.

@media print {
  * {
    background: transparent !important;
    color: black !important;
    filter: none !important;
    // Black prints faster: sanbeiji.com/archives/953
    @include text-shadow(none);
    -ms-filter: none !important;
  }

  a {
    text-decoration: underline;
    &:visited {
      text-decoration: underline;
    }
    &[href]:after {
      content: " (" attr(href) ")";
    }
  }
  abbr[title]:after {
    content: " (" attr(title) ")";
  }
  // Do not show javascript and internal links.
  a {
    &[href^="javascript:"]:after,
    &[href^="#"]:after {
      content: "";
    }
  }
  // Printing Tables: css-discuss.incutio.com/wiki/Printing_Tables
  thead {
    display: table-header-group;
  }
  tr,
  img {
    page-break-inside: avoid;
  }
  @page {
    margin: 0.5cm;
  }
  p,
  h2,
  h3 {
    orphans: 3;
    widows: 3;
  }
  h2,
  h3 {
    page-break-after: avoid;
  }
}
